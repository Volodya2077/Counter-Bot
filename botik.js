const { Telegraf, Markup } = require('telegraf');
require('dotenv').config()
const bot = new Telegraf(process.env.BOT_TOKEN);
let userState = {};
bot.start((ctx) => {
    console.log(ctx.update)
    ctx.reply(`ÐŸÑ€Ð¸Ð²ÐµÑ‚,${ctx.update.message.from.first_name}, Ñ€Ð°Ð´Ñ‹ Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ñƒ Ð½Ð°ÑðŸ§‘ðŸ»â€ðŸ’»`, Markup
        .keyboard([
            ['Ðž Ð½Ð°Ñ', 'Ð Ð°ÑÑÑ‡ÐµÑ‚ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸', 'ÐžÑ‚Ð·Ñ‹Ð²Ñ‹']   
        ]).oneTime())
});
bot.hears('Ðž Ð½Ð°Ñ', (ctx)=>{
    ctx.reply('Ð”Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ñ‚Ð¾Ð²Ð°Ñ€ Ñ ÐšÐ¸Ñ‚Ð°Ñ/ÐÐ¼ÐµÑ€Ð¸ÐºÐ¸ âœ…Poizon/95/Taobao/1688, Ð±Ð¾Ð»ÑŒÑˆÐµ Ñƒ Ð½Ð°Ñ Ð² ÐºÐ°Ð½Ð°Ð»Ðµâž https://t.me/AstanakLogistixxx/3',Markup
        .keyboard([
            ['Ð Ð°ÑÑÑ‡ÐµÑ‚ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸', 'ÐžÑ‚Ð·Ñ‹Ð²Ñ‹']
        ]).oneTime().resize())
})
bot.hears('ÐžÑ‚Ð·Ñ‹Ð²Ñ‹',(ctx)=>{
    const link = `https://t.me/AstanakLogistixxx/599`;
    ctx.reply(`${link} ÐœÐ½Ð¾Ð³Ð¾ Ð¾Ñ‚Ð·Ñ‹Ð²Ð¾Ð² Ñƒ Ð½Ð°Ñ Ð² ÐºÐ°Ð½Ð°Ð»Ðµ, Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ñ‰Ð¸Ñ‚Ðµ Ð¿Ð¾ #Ð¾Ñ‚Ð·Ñ‹Ð²Ñ‹`, Markup
        .keyboard([
            ['Ðž Ð½Ð°Ñ','Ð Ð°ÑÑÑ‡ÐµÑ‚ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸']
        ]).oneTime().resize());
})


bot.hears('Ð Ð°ÑÑÑ‡ÐµÑ‚ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸',(ctx)=>{
    userState[ctx.from.id] = ctx.message.text
    ctx.reply('Ð’Ñ‹Ð±Ð¸Ñ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ñ‚Ð¾Ð²Ð°Ñ€Ð°ðŸ›ï¸',Markup
        .keyboard([
            ['ÐžÐ±ÑƒÐ²ÑŒðŸ‘Ÿ', 'Ð¨Ñ‚Ð°Ð½Ñ‹/Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð²ÐºÐ¸ðŸ‘–','ÐšÑƒÑ€Ñ‚ÐºÐ¸ðŸ‚'],
            ['Ð¨Ð¾Ñ€Ñ‚Ñ‹/Ñ„ÑƒÑ‚Ð±Ð¾Ð»ÐºÐ¸ðŸ‘•','ÐÐºÑÐµÑÑÑƒÐ°Ñ€Ñ‹âŒšï¸'],
            ['Ð’ Ð¼ÐµÐ½ÑŽâ˜ž']
        ]).oneTime().resize())
})
const media =  [
    {type: 'photo',
    media: { source: '/Users/vohino-grekovo/Desktop/telegrafbot/excemple1.jpg',
    }},
    {type: 'photo',
    media: { source: '/Users/vohino-grekovo/Desktop/telegrafbot/excample2.jpg'}
    },
]

bot.hears(['ÐžÐ±ÑƒÐ²ÑŒðŸ‘Ÿ', 'Ð¨Ñ‚Ð°Ð½Ñ‹/Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð²ÐºÐ¸ðŸ‘–', 'Ð¨Ð¾Ñ€Ñ‚Ñ‹/Ñ„ÑƒÑ‚Ð±Ð¾Ð»ÐºÐ¸ðŸ‘•', 'ÐÐºÑÐµÑÑÑƒÐ°Ñ€Ñ‹âŒšï¸','ÐšÑƒÑ€Ñ‚ÐºÐ¸ðŸ‚'], (ctx) => {
    userState[ctx.from.id] = ctx.message.text; 
    ctx.replyWithMediaGroup(media)
    ctx.reply('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†ÐµÐ½Ñƒ Ð² Â¥ðŸ’´')
   
});
bot.hears('Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÐµÑ‰Ñ‘ðŸ§®', (ctx)=>{
    ctx.reply('Ð’Ñ‹Ð±Ð¸Ñ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ñ‚Ð¾Ð²Ð°Ñ€Ð°ðŸ›ï¸',Markup
        .keyboard([
            ['ÐžÐ±ÑƒÐ²ÑŒðŸ‘Ÿ', 'Ð¨Ñ‚Ð°Ð½Ñ‹/Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð²ÐºÐ¸ðŸ‘–','ÐšÑƒÑ€Ñ‚ÐºÐ¸ðŸ‚'],
            ['Ð¨Ð¾Ñ€Ñ‚Ñ‹/Ñ„ÑƒÑ‚Ð±Ð¾Ð»ÐºÐ¸ðŸ‘•','ÐÐºÑÐµÑÑÑƒÐ°Ñ€Ñ‹âŒšï¸'],
            ['Ð’ Ð¼ÐµÐ½ÑŽâ˜ž']
        ]).oneTime().resize())
})
bot.hears('ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·ðŸ§¾', (ctx)=>{
    ctx.reply('Ð”Ð»Ñ Ð·Ð°ÐºÐ°Ð·Ð° Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð¼Ð½Ðµ Ð² Ð»Ñ @AstanakX')
})

bot.hears('Ð’ Ð¼ÐµÐ½ÑŽâ˜ž',(ctx)=>{
    console.log(ctx.update)
    ctx.reply(`ÐŸÑ€Ð¸Ð²ÐµÑ‚, ${ctx.update.message.from.first_name},Ñ€Ð°Ð´Ñ‹ Ñ‚ÐµÐ±Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ñƒ Ð½Ð°ÑðŸ§‘ðŸ»â€ðŸ’»`, Markup
        .keyboard([
            ['Ðž Ð½Ð°Ñ', 'Ð Ð°ÑÑÑ‡ÐµÑ‚ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸', 'ÐžÑ‚Ð·Ñ‹Ð²Ñ‹'],
        ]).oneTime().resize(),{parse_mode: 'HTML'}
    )
})
bot.on('text', (ctx) => {
    const action = userState[ctx.from.id];
    let response;
    if (action){
        const input = parseFloat(ctx.message.text);

        if (!isNaN(input)) {
            
            switch (action) {
                case 'ÐžÐ±ÑƒÐ²ÑŒðŸ‘Ÿ':
                    response = `Ð¡ÑƒÐ¼Ð¼Ð° Ð·Ð°ÐºÐ°Ð·Ð° Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð¸ ÑÑ‚Ñ€Ð°Ñ…Ð¾Ð²ÐºÐ¸ Ð´Ð¾ ÐœÐ¾ÑÐºÐ²Ñ‹: ${Math.floor(((input *13)+850+350)*1.1)}â‚½

*Ð’ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð³Ð¾Ñ€Ð¾Ð´Ð° Ñ†ÐµÐ½Ð° Ð¾Ð±Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ð¾*

Ð’Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ 13-16 Ð´Ð½ÐµÐ¹ðŸš¢
ÐŸÐ¾ Ð¿Ð¾Ð²Ð¾Ð´Ñƒ Ð°Ð²Ð¸Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ðŸ›©ï¸  Ð¿Ð¸ÑÐ°Ñ‚ÑŒ - @AstanakX
                    `; 
                    break;
                case 'Ð¨Ñ‚Ð°Ð½Ñ‹/Ð¢Ð¾Ð»ÑÑ‚Ð¾Ð²ÐºÐ¸ðŸ‘–':
                    response = `Ð¡ÑƒÐ¼Ð¼Ð° Ð·Ð°ÐºÐ°Ð·Ð° Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð¸ ÑÑ‚Ñ€Ð°Ñ…Ð¾Ð²ÐºÐ¸ Ð´Ð¾ ÐœÐ¾ÑÐºÐ²Ñ‹: ${Math.floor(((input *13)+650+150)*1.1)}â‚½

*Ð’ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð³Ð¾Ñ€Ð¾Ð´Ð° Ñ†ÐµÐ½Ð° Ð¾Ð±Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ð¾*

Ð’Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ 13-16 Ð´Ð½ÐµÐ¹ðŸš¢
ÐŸÐ¾ Ð¿Ð¾Ð²Ð¾Ð´Ñƒ Ð°Ð²Ð¸Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ðŸ›©ï¸  Ð¿Ð¸ÑÐ°Ñ‚ÑŒ - @AstanakX
                        `; 
                    break;
                case 'Ð¨Ð¾Ñ€Ñ‚Ñ‹/Ñ„ÑƒÑ‚Ð±Ð¾Ð»ÐºÐ¸ðŸ‘•':
                    response = `Ð¡ÑƒÐ¼Ð¼Ð° Ð·Ð°ÐºÐ°Ð·Ð° Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð¸ ÑÑ‚Ñ€Ð°Ñ…Ð¾Ð²ÐºÐ¸ Ð´Ð¾ ÐœÐ¾ÑÐºÐ²Ñ‹: ${Math.floor(((input *13)+500+150)*1.12)}â‚½

*Ð’ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð³Ð¾Ñ€Ð¾Ð´Ð° Ñ†ÐµÐ½Ð° Ð¾Ð±Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ð¾*

Ð’Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ 13-16 Ð´Ð½ÐµÐ¹ðŸš¢
ÐŸÐ¾ Ð¿Ð¾Ð²Ð¾Ð´Ñƒ Ð°Ð²Ð¸Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ðŸ›©ï¸  Ð¿Ð¸ÑÐ°Ñ‚ÑŒ - @AstanakX
                    `;  
                    break;
                case 'ÐšÑƒÑ€Ñ‚ÐºÐ¸ðŸ‚':
                    response = `Ð¡ÑƒÐ¼Ð¼Ð° Ð·Ð°ÐºÐ°Ð·Ð° Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð¸ ÑÑ‚Ñ€Ð°Ñ…Ð¾Ð²ÐºÐ¸ Ð´Ð¾ ÐœÐ¾ÑÐºÐ²Ñ‹: ${Math.floor(((input *13)+700+150)*1.1)}â‚½

*Ð’ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð³Ð¾Ñ€Ð¾Ð´Ð° Ñ†ÐµÐ½Ð° Ð¾Ð±Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ð¾*

Ð’Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ 13-16 Ð´Ð½ÐµÐ¹ðŸš¢
ÐŸÐ¾ Ð¿Ð¾Ð²Ð¾Ð´Ñƒ Ð°Ð²Ð¸Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ðŸ›©ï¸  Ð¿Ð¸ÑÐ°Ñ‚ÑŒ - @AstanakX`
                case 'ÐÐºÑÐµÑÑÑƒÐ°Ñ€Ñ‹âŒšï¸':
                    response = `Ð¡ÑƒÐ¼Ð¼Ð° Ð·Ð°ÐºÐ°Ð·Ð° Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð¸ ÑÑ‚Ñ€Ð°Ñ…Ð¾Ð²ÐºÐ¸ Ð´Ð¾ ÐœÐ¾ÑÐºÐ²Ñ‹: ${Math.floor(((input *13)+550+250)*1,1)}â‚½

*Ð’ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð³Ð¾Ñ€Ð¾Ð´Ð° Ñ†ÐµÐ½Ð° Ð¾Ð±Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ð¾*

Ð’Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ 13-16 Ð´Ð½ÐµÐ¹ðŸš¢
ÐŸÐ¾ Ð¿Ð¾Ð²Ð¾Ð´Ñƒ Ð°Ð²Ð¸Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ðŸ›©ï¸  Ð¿Ð¸ÑÐ°Ñ‚ÑŒ - @AstanakX
                     `;  
                    break;
                default:
                    response = 'Ð¯ Ð²Ð°Ñ Ð½Ðµ Ð¿Ð¾Ð½ÑÐ»ðŸ§';
            }
            ctx.reply(response);
            ctx.reply('â¬‡ï¸Žâ¬‡â¬‡ï¸Ž',Markup.keyboard([
                ['Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÐµÑ‰Ñ‘ðŸ§®'],
                ['ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·ðŸ§¾'],
                ['Ð’ Ð¼ÐµÐ½ÑŽâ˜ž']
            ]).oneTime().resize());
            
            delete userState[ctx.from.id];
        }else {
            ctx.reply('ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾.');
        }
    } 
    
})

bot.launch()
    .then(() => {
        console.log('Bot is running');
    })
    .catch((error) => {
        console.error('Error launching bot:', error);
    })  